<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>EmbedKit - 轻量级嵌入式C语言开发库</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="description" content="EmbedKit是一个专为资源受限的嵌入式系统设计的轻量级C语言库集合，提供任务调度、内存管理、数据结构等核心功能">
  <meta name="keywords" content="embedded,c,library,rtos,scheduler,memory,datastructure,嵌入式,轻量级">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <meta name="author" content="EmbedKit Team">
  
  <!-- Open Graph / Social Media -->
  <meta property="og:title" content="EmbedKit - 轻量级嵌入式C语言开发库">
  <meta property="og:description" content="专为资源受限的嵌入式系统设计的轻量级C语言库集合">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://zuoliangyu.github.io/EmbedKit/">
  
  <!-- Favicon -->
  <link rel="icon" href="_media/favicon.ico" type="image/x-icon">
  
  <!-- Theme -->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify-darklight-theme@3/dist/docsify-themeable/style.min.css">
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="custom.css">
  
  <!-- Custom Styles -->
  <style>
    :root {
      --base-font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft YaHei", "微软雅黑", Helvetica, Arial, sans-serif;
      --base-font-size: 16px;
      --theme-color: #42b983;
      --theme-color-dark: #42b983;
      
      /* Light theme */
      --docsify-example-code-background: #f8f8f8;
      --docsify-example-code-color: #525252;
      --sidebar-background: #fff;
      --sidebar-border-color: #eaecef;
      
      /* Sidebar */
      --sidebar-nav-link-before-content: '📄';
      --sidebar-nav-link-before-content-l1: '📁';
      --sidebar-nav-link-before-content-l2: '📄';
      --sidebar-width: 320px;
      --sidebar-nav-pagelink-padding: 5px 10px 5px 20px;
      
      /* Code blocks */
      --code-block-border-radius: 5px;
      --code-font-family: 'Fira Code', 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', monospace;
      --code-font-size: 14px;
      
      /* Content */
      --content-max-width: 900px;
      --heading-h1-border-color: #eaecef;
      --heading-h2-border-color: #eaecef;
    }
    
    /* Dark theme overrides */
    [data-theme="dark"] {
      --docsify-example-code-background: #1e1e1e;
      --docsify-example-code-color: #e6e6e6;
      --sidebar-background: #2b2b2b;
      --sidebar-border-color: #3e3e3e;
      --heading-h1-border-color: #3e3e3e;
      --heading-h2-border-color: #3e3e3e;
    }
    
    /* 中文字体优化 */
    body {
      font-family: var(--base-font-family);
      line-height: 1.6;
    }
    
    /* 自定义滚动条 */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: #f1f1f1;
    }
    
    ::-webkit-scrollbar-thumb {
      background: #888;
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: #555;
    }
    
    /* 侧边栏样式增强 */
    .sidebar {
      background: var(--sidebar-background);
      border-right: 1px solid var(--sidebar-border-color);
    }
    
    .sidebar-nav > ul > li {
      margin: 15px 0;
    }
    
    .sidebar-nav > ul > li > p {
      font-weight: 700;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: #999;
      margin: 10px 0 5px 15px;
    }
    
    /* 模块状态标签 */
    .module-badge {
      display: inline-block;
      font-size: 11px;
      padding: 2px 6px;
      border-radius: 3px;
      margin-left: 5px;
      font-weight: 600;
      vertical-align: middle;
    }
    
    .badge-stable {
      background-color: #42b983;
      color: white;
    }
    
    .badge-beta {
      background-color: #f39c12;
      color: white;
    }
    
    .badge-experimental {
      background-color: #e74c3c;
      color: white;
    }
    
    .badge-deprecated {
      background-color: #95a5a6;
      color: white;
    }
    
    /* 版本信息显示 */
    .version-info {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--theme-color);
      color: white;
      padding: 5px 10px;
      border-radius: 20px;
      font-size: 12px;
      z-index: 999;
      display: none;
    }
    
    .version-info.show {
      display: block;
    }
    
    /* 代码块增强 */
    pre[class*="language-"] {
      position: relative;
      overflow: auto;
      margin: 1.5em 0;
      background: var(--docsify-example-code-background);
    }
    
    pre[class*="language-"]:before {
      content: attr(data-lang);
      position: absolute;
      top: 0;
      right: 0;
      padding: 3px 10px;
      font-size: 11px;
      color: #999;
      font-weight: 600;
      background: rgba(0,0,0,0.1);
      border-radius: 0 0 0 5px;
      text-transform: uppercase;
    }
    
    /* 文件路径显示 */
    .file-path {
      background: #f4f4f4;
      border: 1px solid #ddd;
      border-radius: 3px;
      padding: 2px 6px;
      font-family: var(--code-font-family);
      font-size: 12px;
      color: #666;
      margin: 0 2px;
    }
    
    [data-theme="dark"] .file-path {
      background: #2b2b2b;
      border-color: #3e3e3e;
      color: #aaa;
    }
    
    /* API 文档样式 */
    .api-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
    }
    
    .api-header h2,
    .api-header h3 {
      margin: 0;
      color: white !important;
      border: none !important;
    }
    
    /* 参数表格样式 */
    .param-table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }
    
    .param-table th {
      background: var(--theme-color);
      color: white;
      padding: 10px;
      text-align: left;
      font-weight: 600;
    }
    
    .param-table td {
      padding: 10px;
      border-bottom: 1px solid #e1e4e8;
    }
    
    [data-theme="dark"] .param-table td {
      border-bottom-color: #3e3e3e;
    }
    
    /* 提示框样式 */
    .tip, .note {
      padding: 12px 24px;
      background-color: #e7f3fe;
      border-left: 4px solid #2196F3;
      margin: 20px 0;
      border-radius: 0 4px 4px 0;
    }
    
    .warning {
      padding: 12px 24px;
      background-color: #fff3cd;
      border-left: 4px solid #ff9800;
      margin: 20px 0;
      border-radius: 0 4px 4px 0;
    }
    
    .danger, .error {
      padding: 12px 24px;
      background-color: #f8d7da;
      border-left: 4px solid #f44336;
      margin: 20px 0;
      border-radius: 0 4px 4px 0;
    }
    
    [data-theme="dark"] .tip,
    [data-theme="dark"] .note {
      background-color: #1e3a5f;
    }
    
    [data-theme="dark"] .warning {
      background-color: #5c4e00;
    }
    
    [data-theme="dark"] .danger,
    [data-theme="dark"] .error {
      background-color: #5c1e1e;
    }
    
    /* 搜索框美化 */
    .search input {
      border-radius: 20px;
      border: 1px solid #ddd;
      padding: 8px 15px;
      font-size: 14px;
    }
    
    .search .results-panel {
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      max-height: 500px;
      overflow-y: auto;
    }
    
    /* 响应式优化 */
    @media screen and (max-width: 768px) {
      :root {
        --sidebar-width: 280px;
        --content-max-width: 100%;
      }
      
      .version-info {
        bottom: 10px;
        right: 10px;
      }
    }
    
    /* 打印样式 */
    @media print {
      .sidebar,
      .github-corner,
      .version-info,
      .navigation {
        display: none !important;
      }
      
      .content {
        max-width: 100% !important;
        margin: 0 !important;
      }
    }
    
    /* 加载动画 */
    #app:empty:before {
      content: "📚 正在加载文档...";
      display: block;
      text-align: center;
      padding: 100px 20px;
      font-size: 18px;
      color: #666;
    }
    
    /* GitHub Corner */
    .github-corner svg {
      fill: var(--theme-color);
      color: #fff;
      position: fixed;
      top: 0;
      right: 0;
      border: 0;
      z-index: 999;
    }
    
    /* 目录导航浮动按钮 */
    .toc-toggle {
      position: fixed;
      bottom: 70px;
      right: 20px;
      width: 40px;
      height: 40px;
      background: var(--theme-color);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 998;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
    
    .toc-toggle:hover {
      transform: scale(1.1);
    }
  </style>
</head>
<body>
  <div id="app">📚 正在加载文档...</div>
  
  <!-- Version Info -->
  <div class="version-info" id="version-info"></div>
  
  <!-- GitHub Corner -->
  <a href="https://github.com/zuoliangyu/EmbedKit" class="github-corner" aria-label="View source on GitHub">
    <svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true">
      <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
      <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
      <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
    </svg>
  </a>
  
  <style>
    .github-corner:hover .octo-arm {
      animation: octocat-wave 560ms ease-in-out
    }
    @keyframes octocat-wave {
      0%, 100% { transform: rotate(0) }
      20%, 60% { transform: rotate(-25deg) }
      40%, 80% { transform: rotate(10deg) }
    }
    @media (max-width:500px) {
      .github-corner:hover .octo-arm { animation: none }
      .github-corner .octo-arm { animation: octocat-wave 560ms ease-in-out }
    }
  </style>
  
  <script>
    // 配置对象
    window.$docsify = {
      name: 'EmbedKit',
      repo: 'https://github.com/zuoliangyu/EmbedKit',
      homepage: 'README.md',
      loadSidebar: true,
      loadNavbar: true,
      subMaxLevel: 3,
      auto2top: true,
      coverpage: true,
      onlyCover: false,
      notFoundPage: true,
      mergeNavbar: true,
      maxLevel: 4,
      
      // 路径配置
      alias: {
        '/.*/_sidebar.md': '/_sidebar.md',
        '/.*/_navbar.md': '/_navbar.md',
        '/changelog': '/CHANGELOG.md',
        '/contributing': '/CONTRIBUTING.md'
      },
      
      // 搜索配置（中文优化）
      search: {
        maxAge: 86400000, // 24小时缓存
        paths: 'auto',
        placeholder: {
          '/': '🔍 搜索文档...',
          '/en/': '🔍 Type to search...'
        },
        noData: {
          '/': '😔 没有找到相关结果',
          '/en/': '😔 No Results'
        },
        depth: 6,
        hideOtherSidebarContent: false,
        namespace: 'embedkit-docs',
        pathNamespaces: ['/api', '/modules', '/examples']
      },
      
      // 分页导航
      pagination: {
        previousText: '⬅️ 上一篇',
        nextText: '下一篇 ➡️',
        crossChapter: true,
        crossChapterText: true,
      },
      
      // 代码复制按钮
      copyCode: {
        buttonText: '📋 复制',
        errorText: '❌ 复制失败',
        successText: '✅ 已复制到剪贴板'
      },
      
      // 标签页配置
      tabs: {
        persist: true,
        sync: true,
        theme: 'material',
        tabComments: true,
        tabHeadings: true
      },
      
      // 文档更新时间格式
      formatUpdated: '{YYYY}年{MM}月{DD}日 {HH}:{mm}',
      
      // 外部链接行为
      externalLinkTarget: '_blank',
      externalLinkRel: 'noopener noreferrer',
      
      // 主题配置
      themeable: {
        readyTransition: true,
        responsiveTables: true
      },
      
      // 自动生成目录
      toc: {
        scope: '.markdown-section',
        headings: 'h2, h3, h4',
        title: '📑 本页目录'
      },
      
      // 灵活提示配置
      'flexible-alerts': {
        style: 'flat',
        note: {
          label: '💡 提示'
        },
        tip: {
          label: '💡 提示'
        },
        warning: {
          label: '⚠️ 注意'
        },
        danger: {
          label: '⛔ 危险'
        }
      },
      
      // 计数配置
      count: {
        countable: true,
        fontsize: '0.9em',
        color: 'rgb(90,90,90)',
        language: 'chinese'
      },
      
      // 插件配置
      plugins: [
        // 编辑文档链接
        function(hook, vm) {
          hook.beforeEach(function(html) {
            if (vm.route.file) {
              var url = 'https://github.com/zuoliangyu/EmbedKit/blob/master/' + vm.route.file;
              var editHtml = '[📝 在 GitHub 上编辑此页](' + url + ')\n\n';
              return editHtml + html;
            }
            return html;
          });
        },
        
        // 添加更新时间和阅读时间
        function(hook, vm) {
          hook.beforeEach(function(content) {
            // 计算阅读时间（中文按300字/分钟）
            var charCount = content.replace(/[^\u4e00-\u9fa5]/g, '').length;
            var wordCount = content.replace(/[\u4e00-\u9fa5]/g, '').split(/\s+/).filter(Boolean).length;
            var readTime = Math.ceil((charCount / 300) + (wordCount / 200));
            
            return content + '\n\n---\n\n' +
                   '📖 预计阅读时间: ' + readTime + ' 分钟 | ' +
                   '📅 文档更新于 {docsify-updated}';
          });
        },
        
        // 代码语言标签和行号
        function(hook, vm) {
          hook.afterEach(function(html, next) {
            // 添加语言标签
            html = html.replace(/<pre><code class="lang-(\w+)">/g, '<pre data-lang="$1"><code class="lang-$1">');
            
            // 添加行号（可选）
            html = html.replace(/<pre data-lang="(\w+)"><code class="lang-\w+">([\s\S]*?)<\/code><\/pre>/g, 
              function(match, lang, code) {
                if (lang === 'mermaid') return match;
                var lines = code.split('\n');
                if (lines.length > 5) {  // 只为超过5行的代码块添加行号
                  var numberedCode = lines.map((line, i) => 
                    `<span class="line-number">${i + 1}</span>${line}`
                  ).join('\n');
                  return `<pre data-lang="${lang}" class="line-numbers"><code class="lang-${lang}">${numberedCode}</code></pre>`;
                }
                return match;
              });
            
            next(html);
          });
        },
        
        // 自动生成模块状态标签
        function(hook, vm) {
          hook.afterEach(function(html, next) {
            html = html.replace(/\[模块:(stable|beta|experimental|deprecated)\]/g, 
              '<span class="module-badge badge-$1">$1</span>');
            next(html);
          });
        },
        
        // 版本信息显示
        function(hook, vm) {
          hook.mounted(function() {
            fetch('package.json')
              .then(r => r.json())
              .then(data => {
                var versionEl = document.getElementById('version-info');
                if (versionEl && data.version) {
                  versionEl.innerHTML = 'v' + data.version;
                  versionEl.classList.add('show');
                }
              })
              .catch(() => {
                // 如果没有package.json，显示默认版本
                var versionEl = document.getElementById('version-info');
                if (versionEl) {
                  versionEl.innerHTML = 'v1.0.0';
                  versionEl.classList.add('show');
                }
              });
          });
        },
        
        // 自动索引生成
        function(hook, vm) {
          hook.beforeEach(function(content) {
            // 检测 [自动索引] 标记并替换为实际索引
            if (content.includes('[自动索引]')) {
              var index = generateAutoIndex(vm.route.path);
              content = content.replace('[自动索引]', index);
            }
            return content;
          });
        },
        
        // 代码示例增强
        function(hook, vm) {
          hook.afterEach(function(html, next) {
            // 为代码块添加"运行"和"复制"按钮
            html = html.replace(/<pre data-lang="c">([\s\S]*?)<\/pre>/g, function(match, code) {
              return match + '<div class="code-toolbar">' +
                     '<button class="copy-code">📋 复制</button>' +
                     '<button class="try-code">▶️ 在线运行</button>' +
                     '</div>';
            });
            next(html);
          });
        }
      ],
      
      // Markdown 配置
      markdown: {
        renderer: {
          code: function(code, lang) {
            // Mermaid 图表支持
            if (lang === 'mermaid') {
              return '<div class="mermaid">' + mermaid.render('mermaid-svg-' + Date.now(), code) + '</div>';
            }
            
            // PlantUML 支持（通过外部服务）
            if (lang === 'plantuml') {
              var encoded = plantumlEncoder.encode(code);
              return '<img src="http://www.plantuml.com/plantuml/svg/' + encoded + '" />';
            }
            
            return this.origin.code.apply(this, arguments);
          },
          
          // 自定义表格渲染
          table: function(header, body) {
            return '<div class="table-wrapper">' +
                   '<table class="param-table">' +
                   '<thead>' + header + '</thead>' +
                   '<tbody>' + body + '</tbody>' +
                   '</table></div>';
          }
        }
      }
    };
    
    // 自动索引生成函数
    function generateAutoIndex(path) {
      // 这里可以根据路径动态生成索引
      // 实际实现需要根据项目结构调整
      return '## 📚 文档索引\n\n正在生成...';
    }
  </script>
  
  <!-- Docsify Core -->
  <script src="//cdn.jsdelivr.net/npm/docsify@4/lib/docsify.min.js"></script>
  
  <!-- 核心插件 -->
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-copy-code@2/dist/docsify-copy-code.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-pagination/dist/docsify-pagination.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-tabs@1/dist/docsify-tabs.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/emoji.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/zoom-image.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/external-script.min.js"></script>
  
  <!-- 增强插件 -->
  <script src="//cdn.jsdelivr.net/npm/docsify-count/dist/countable.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-plugin-flexible-alerts/dist/docsify-plugin-flexible-alerts.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-sidebar-collapse/dist/docsify-sidebar-collapse.min.js"></script>
  
  <!-- 代码高亮 -->
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-c.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-cpp.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-makefile.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-bash.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-json.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-yaml.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-python.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-cmake.min.js"></script>
  
  <!-- Mermaid 图表 -->
  <script src="//cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({ 
      startOnLoad: true,
      theme: 'default',
      themeVariables: {
        primaryColor: '#42b983',
        primaryTextColor: '#fff',
        primaryBorderColor: '#42b983',
        lineColor: '#42b983',
        secondaryColor: '#006100',
        tertiaryColor: '#fff'
      }
    });
  </script>
  
  <!-- 暗黑模式 -->
  <script src="//cdn.jsdelivr.net/npm/docsify-darklight-theme@3/dist/docsify-themeable/main.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-darklight-theme@3/dist/docsify-themeable/index.min.js"></script>
  
  <!-- 自定义脚本 -->
  <script>
    // 监听主题切换
    document.addEventListener('DOMContentLoaded', function() {
      // 自动检测系统主题
      if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.documentElement.setAttribute('data-theme', 'dark');
      }
      
      // 监听系统主题变化
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
        document.documentElement.setAttribute('data-theme', e.matches ? 'dark' : 'light');
      });
    });
    
    // 添加快捷键支持
    document.addEventListener('keydown', function(e) {
      // Ctrl/Cmd + K 打开搜索
      if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
        e.preventDefault();
        document.querySelector('.search input').focus();
      }
      
      // Ctrl/Cmd + B 切换侧边栏
      if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        document.body.classList.toggle('close');
      }
    });
  </script>
</body>
</html>