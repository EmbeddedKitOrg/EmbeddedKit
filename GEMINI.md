# Gemini AI Agent Context

## Project: EmbeddedKit

### Overview

This project, `EmbeddedKit`, is an embedded application for the STM32F407xx microcontroller. It is built using CMake and the GCC ARM toolchain. The core of the project is a custom component called `EK_Component`, which includes a lightweight, coroutine-based, real-time operating system (RTOS-like) framework named `EK_Corotinue`. This framework is responsible for task scheduling, inter-task communication via message queues, and dynamic memory management.

The application logic is implemented within tasks managed by the `EK_Corotinue` kernel. The entry point in `main.c` initializes the hardware, sets up the system clock, and then starts the coroutine kernel.

### Key Technologies

*   **Microcontroller:** STM32F407xx
*   **Core Framework:** Custom `EK_Corotinue` coroutine system
*   **Language:** C (C11 standard)
*   **Build System:** CMake
*   **Toolchain:** GCC ARM Embedded

### Building and Running

**Building the Project:**

The project uses CMake for building. To compile the code, you will need to have the `arm-none-eabi-gcc` toolchain installed and in your system's PATH.

1.  **Configure the project with CMake:**
    ```bash
    cmake -B build -S . -DCMAKE_TOOLCHAIN_FILE=cmake/gcc-arm-none-eabi.cmake
    ```

2.  **Compile the project:**
    ```bash
    cmake --build build
    ```

**Running the Application:**

The build process will generate an ELF file in the `build` directory. This file needs to be flashed to the STM32 microcontroller.

*   A `flash.ps1` PowerShell script is available, which likely handles the flashing process using a tool like OpenOCD or ST-Link. You may need to configure the script with the correct programmer and settings.

### Development Conventions

*   **Code Style:** The code appears to follow standard C conventions.
*   **RTOS:** Application logic should be implemented as tasks within the `EK_Corotinue` framework.
*   **Hardware Abstraction:** The project uses the STM32 HAL library, generated by STM32CubeMX, for hardware abstraction.
*   **Directory Structure:**
    *   `APP/`: Main application logic and tasks.
    *   `BSP/`: Board Support Package for hardware-specific drivers.
    *   `Core/`: STM32CubeMX-generated files and system initialization.
    *   `Drivers/`: STM32 HAL drivers and CMSIS core.
    *   `EK_Component/`: The custom coroutine framework and other reusable components.
    *   `cmake/`: CMake toolchain files and scripts.
